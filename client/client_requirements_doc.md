<div dir="rtl">

# 📄 מסמך דרישות - צד לקוח  
## מערכת ניהול מלאי רב-שוכנת

### 🎯 מטרת המערכת  
לאפשר למשתמשים מלקוחות (Tenants) שונים לנהל מלאי בהתאם לחוקי ההתנהגות הייחודיים לכל שוכר, עם ממשק משתמש נוח, מודולרי, ומבוסס תצורת שוכר.

---

### 🧰 טכנולוגיות מוצעות  
- **Framework:** Angular / React (בהתאם לפרויקט שלך)  
- **State Management:** Redux / Signals (ב-Angular 16+)  
- **HTTP:** Axios / Angular HttpClient  
- **UI Kit:** Material UI / Angular Material  
- **Auth:** התחברות עם מייל וסיסמה / הרשמה עם שם, מייל וסיסמה, אימות עם טוקן JWT  
- **Testing:** Cypress / Jest  

---

### 🧩 דרישות פונקציונליות

#### 1. התחברות והרשמה  
- **התחברות (Login):**  
  - משתמש מתחבר עם מייל וסיסמה.  
  - לאחר התחברות מוצלחת, מתקבל JWT המאמת את המשתמש ומאפשר גישה לפונקציונליות המערכת.  
- **הרשמה (Signup):**  
  - משתמש חדש יכול להירשם עם שם, מייל וסיסמה.  
  - לאחר הרשמה מוצלחת, המשתמש יוכל להתחבר ולקבל JWT.  
- שמירת הטוקן (JWT) ב-LocalStorage או ב-Cookies לצורך שימוש עתידי באימות בקשות.  
- במידה והמשתמש אינו מחובר (אין טוקן JWT תקין), כל הפונקציונליות של המערכת להצגת פרטים ומלאי תהיה חסומה, ותוצג הודעה/מסך התחברות.  

#### 2. זיהוי שוכר  
- כל בקשה לשרת תכלול כותרת (Header) בשם `X-Tenant-ID`.  
- יש לאפשר למשתמש לבחור שוכר מתוך רשימה (Dropdown או Modal) או לשמור את הבחירה מקומית (LocalStorage).  
- במידה והשוכר לא תקין או חסר – להציג שגיאה מתאימה (401 Unauthorized) ולעצור את הפעולה.  

#### 3. ניהול מלאי  
אפשרויות לפי הגדרות השוכר (מתקבלות מהשרת):  
- הוספת פריט (Add item)  
- רשימת פריטים (View inventory)  
- השאלת פריט (Check out) – תתאפשר רק אם `EnableCheckout = true`  
- החזרת פריט (Check in)  

בעת השאלת פריט:  
- יש לוודא:  
  - שלא הגעת למגבלת `MaxItemsPerUser`.  
  - שהקטגוריה של הפריט מותרת (מופיעה ב־`AllowedItemCategories`).  

#### 4.ניהול פריטים  
- טופס הוספה:  
  - שם פריט  
  - קטגוריה (Dropdown, לפי הקטגוריות המותרות)  
  - תיאור  
- רשימת פריטים:  
  - טבלת פריטים עם אפשרות לסינון לפי קטגוריה / סטטוס (מושאל/פנוי)  
  - כפתורים: "Check Out" / "Check In" בהתאם לסטטוס  


#### 5. חוויית משתמש *(אפשרות לעתיד)*  
- (דשבורד ראשי המציג:  
  - מספר פריטים זמינים  
  - פריטים מושאלים לפי משתמש  
  - סטטוס כללי של פעולות אחרונות)  
- UI רספונסיבי עם טעינה וידידותיות למובייל  
- הודעות שגיאה / הצלחה ברורות לכל פעולה  
- Loading Indicators לכל פעולה אסינכרונית  
 
#### 6. רישום פעולות *(אפשרות לעתיד)*  
- הצגת היסטוריית הפעולות האחרונות של המשתמש:  
  - תאריך  
  - פעולה (check-in / check-out / add)  
  - סטטוס הצלחה/כישלון  

---

### 🔐 אבטחה  
- אימות כל הבקשות באמצעות טוקן JWT תקין.  
- מניעת שליחה של `X-Tenant-ID` ריק.  
- חסימת פעולות עוקפות (כמו השאלת פריט אסור).  
- חסימת גישה לכל הפונקציונליות שלאחר הלוגין למשתמשים לא מחוברים.  

---

### 🧪 בדיקות  
- סימולציה של שני שוכרים:  
  - **alpha-logistics:** מאפשר השאלות, מגבלה 3 פריטים, כל הקטגוריות.  
  - **beta-supply:** לא מאפשר השאלות, רק קטגוריית "Electronics".  
- יש לוודא שההתנהגות משתנה בהתאם לשוכר הנבחר.  
- יש לוודא שכל הפונקציונליות מוצגת רק לאחר התחברות מוצלחת עם JWT תקין.

</div>
